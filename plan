## Comments Done

upic inside or outside the well
comment-edit buttons margin
"commented:" text in top line
top line font size
"completed" and other comment types
normal or small upics
mobile

# Feed TODO

comment form
frontend tests

optimize fetching comments
rendering speed

## Done

/api/feed

`db->events->feed({ for => 'berekuk' })`

    [
        {
            quest: ...
            comments: [
                ...
            ]
        },
        ...
    ]

hide extra comments
realm name/icon on quest

order by bump
`db->quests->bump` method
call bump on comment

stencils in feed
[x] fill bumps
[x] reusable `bumpable` role
[x] events->feed fetches stencils

merge stencils and quests collections

think about representing user/realm chambers - posts with entity="discussion"
think about hide - later

stencil/feed view

fill bumps before deploy
upics
border-radius between expand-panel and comments
mobile

## Later
#
cut for comments and quests

## DB SCHEMA

# feed storage

{
    entity: /quest|stencil/
    bump: $ts
}

# merge stencils and quests

common:
- comments
- bump
- name+description
- realm
- points
- author

potentially common:
- tags
- watchers

not common:
- quest.note
- quest.base_points
- quest.status
- quest.team
- quest.stencil

downsides:
- awkward queries from CLI (collection name - objects? entities?)

chambers/discussions
- realm chamber - object with entity=realm
- personal chamber - object with entity=wall

list all posts for news feed:
- sort by bump
- no CC (?)
- limit, offset
- realm OR author OR team

## Comments form

Don't lose form on "show more comments"
- expand as a comment-collection feature
- custom render-all
- prepend on expand
- for each model: visible vs hidden; on expand: for (hidden) { prepend }

"Comment" link below comments if there are many

### Done

"Comment" link in quest
"Comment" link on stencil
Cancel button
Confirm navigation on long texts only
Scroll distance
