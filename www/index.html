<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Play Perl</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <link href="vendors/bootstrap/css/bootstrap.css" rel="stylesheet">
    <link href="vendors/fontawesome/css/font-awesome.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
      }
    </style>
    <link href="vendors/bootstrap/css/bootstrap-responsive.css" rel="stylesheet">
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="vendors/bootstrap/ico/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="vendors/bootstrap/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="vendors/bootstrap/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="vendors/bootstrap/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="vendors/bootstrap/ico/apple-touch-icon-57-precomposed.png">

    <script type="text/template" id="template-app">
        <div class="navbar navbar-inverse navbar-fixed-top">
          <div class="navbar-inner">
            <div class="container">
              <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </a>
              <a class="brand" href="#">Play Perl</a>
              <div class="nav-collapse collapse">
                <ul class="nav">
                  <li class="active menu-item-home"><a href="#">Home</a></li>
                  <li class="menu-item-add-quest"><a href="#quest/add">Add Quest</a></li>
                </ul>
                <p class="navbar-text pull-right"></p>
                    <ul class="nav pull-right current-user-box">
                    </ul>
              </div><!--/.nav-collapse -->
            </div>
          </div>
        </div>
        <div class="app-view-container container"></div>
    </script>

    <script type="text/template" id="template-home">
      <div>
      <h1>Play Perl</h1>
      <h2>What&apos;s going on here?</h2>
      <p>
        <ol>
            <li>This is your public to-do list.</li>
            <li>This is a gamified platform for connecting and encouraging people.</li>
            <li>This is a social network for perl developers.</li>
            <li>This is a place to gather and provide feedback on the stuff you did and on the stuff you&amp;re going to do.</li>
            <li>Finally, you can get game points here!</li>
        </ol>
      </p>
      <div class="quest-collection"></div>
      </div>
    </script>

    <script type="text/template" id="template-quest-collection">
        <div>
        <h2>List of quests</h2>
        <% !hasQuests === 0 && print('You don\'t have any quests yet...') %>
        <table class="table table-bordered quests-list"></table>
        </div>
    </script>

    <script type="text/template" id="template-quest-add">
      <h1>Add a quest</h1>
      <div>
        <textarea name="name" rows="5" placeholder="Quest description" class="span6"></textarea>
        <div>
          <button class="btn btn-primary btn-large submit">Add quest</button>
        </div>
      </div>
    </script>
    <script type="text/template" id="template-quest">
        <tr class="<%= status === 'open' && 'warning' %>">
            <td>
                <span class="label label-<%= status === 'open' && 'warning' %>"><%= status %></span>
                <a href="#quest/<%= _id %>"><%= name  %></a>
            </td>
        </tr>
    </script>

    <script type="text/template" id="template-current-user">
        <li class="dropdown">
            <% if (logged === 1) { %>
                <a href="#" class="dropdown-toggle" data-toggle="dropdown"><%= login %></a>
                <ul class="dropdown-menu">
                    <li>
                        <a href="#" class="logout">Logout</a>
                    </li>
                </ul>
            <% } else { %>
                <a href="/auth/twitter">Login with <i class="icon-twitter icon-large"></i></a>
            <% } %>
        </li>
    </script>

    <script type="text/template" id="template-error">
        <div class="alert alert-error">
          <button type="button" class="close" data-dismiss="alert">×</button>
          <% if (response && response.error) { %>
            <%= response.error %>
          <% } else { %>
            Unknown error
          <% } %>
        </div>
    </script>

    <script type="text/template" id="template-notify">
        <div class="alert alert-notify">
          <button type="button" class="close" data-dismiss="alert">×</button>
          <%= text %>
        </div>
    </script>

    <script type="text/template" id="template-quest-show">

      <h1><%= name %></h1>
      <div class="quest-details">
        <span class="label label-<%= status === 'open' && 'warning' %>"><%= status %></span>
      </div>
      <button type="button" class="quest-close">Close</button>
    </script>
    <script type="text/template" id="template-quest">
        <tr class="<%= status === 'open' && 'warning' %>">
            <td>
                <span class="label label-<%= status === 'open' && 'warning' %>"><%= status %></span>
                <a href="#quest/<%= _id %>"><%= name  %></a>
            </td>
        </tr>
    </script>
  </head>

  <body>
    <div id="layout"></div>

    <script src="http://yandex.st/jquery/1.8.2/jquery.min.js"></script>
    <script src="vendors/bootstrap/js/bootstrap.min.js"></script>
    <script src="vendors/underscore-min.js"></script>
    <script src="vendors/backbone-min.js"></script>
    <script src="vendors/jquery.cookie.js"></script>

    <script>
        var pp = {
            app: {},
            models: {},
            views: {}
        };
    </script>

    <script src="models/user.js"></script>
    <script src="models/quest.js"></script>
    <script src="models/quest-collection.js"></script>
    <script src="views/user.js"></script>
    <script src="views/current-user.js"></script>
    <script src="views/quest-collection.js"></script>
    <script src="views/home.js"></script>
    <script src="views/app.js"></script>
    <script src="views/error.js"></script>
    <script src="views/notify.js"></script>
    <script src="views/quest/quest.js"></script>
    <script src="views/quest/add.js"></script>
    <script src="views/quest/show.js"></script>
    <script src="app.js"></script>

  </body>
</html>
